<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Car Spin Madness Pro</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #141e30, #243b55);
      color: white;
    }
    header {
      display: flex;
      justify-content: space-between;
      padding: 20px 40px;
      background-color: #1f2937;
      align-items: center;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    header h1 {
      margin: 0;
      font-size: 24px;
      color: #e2e8f0;
    }
    nav button {
      background: #ef4444;
      border: none;
      padding: 10px 16px;
      margin-left: 12px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      color: white;
      transition: background-color 0.3s ease;
    }
    nav button:hover {
      background-color: #dc2626;
    }
    #onlineStatus, #pointsStatus {
      font-weight: 600;
      font-size: 14px;
      color: #94a3b8;
    }
    main {
      padding: 100px 20px 40px;
      max-width: 900px;
      margin: 0 auto;
    }
    #carCard {
      background-color: #1e293b;
      border-radius: 20px;
      padding: 20px;
      margin-top: 40px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
      transition: transform 0.4s ease;
    }
    #carCard img {
      max-width: 300px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.8);
      margin-top: 20px;
    }
    #carName {
      font-size: 26px;
      margin: 10px 0 5px;
    }
    #carRarity {
      font-size: 18px;
      font-weight: 600;
      color: #facc15;
      margin-bottom: 10px;
    }
    button.actionBtn {
      background: #ef4444;
      border: none;
      color: white;
      padding: 12px 24px;
      font-weight: 700;
      font-size: 18px;
      border-radius: 12px;
      cursor: pointer;
      margin: 10px 12px 10px 0;
      transition: background-color 0.3s ease;
    }
    button.actionBtn:hover {
      background: #dc2626;
    }
    #notification {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #ef4444;
      padding: 15px 30px;
      border-radius: 30px;
      font-weight: 700;
      font-size: 16px;
      display: none;
      box-shadow: 0 4px 20px rgba(239,68,68,0.7);
    }
    #chatBox {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 280px;
      background: #1e293b;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.8);
      display: flex;
      flex-direction: column;
    }
    #chatMessages {
      height: 140px;
      overflow-y: auto;
      font-size: 14px;
      margin-bottom: 12px;
      color: #e0e7ff;
    }
    #chatInput {
      border-radius: 8px;
      border: none;
      padding: 10px;
      font-size: 14px;
    }
    #shopSection, #leaderboardSection {
      display: none;
      background: #1e293b;
      border-radius: 20px;
      padding: 30px;
      margin-top: 40px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      color: white;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #374151;
      text-align: left;
    }
    th {
      background: #374151;
    }
    tr:hover {
      background: #475569;
    }
    .rarity-legend span {
      display: inline-block;
      margin-right: 15px;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 12px;
      user-select: none;
    }
    .rarity-common { background: #a3a3a3; color: black; }
    .rarity-uncommon { background: #3b82f6; }
    .rarity-epic { background: #c084fc; }
    .rarity-legendary { background: #facc15; color: black; }
    .rarity-exotic { background: #06b6d4; }
    .rarity-mythic { background: #ef4444; }
    .rarity-unknown { background: #22c55e; }
  </style>
</head>
<body>
  <header>
    <div id="onlineStatus">Online: 1</div>
    <h1>Car Spin Madness Pro</h1>
    <div id="pointsStatus">Points: 0 | Luck: 1.0x</div>
    <nav>
      <button onclick="showSection('mainSection')">Home</button>
      <button onclick="showSection('shopSection')">Shop</button>
      <button onclick="showSection('leaderboardSection')">Leaderboard</button>
    </nav>
  </header>
  <main>
    <section id="mainSection" class="activeSection">
      <div id="carCard">
        <h2 id="carName">?</h2>
        <p id="carRarity" class="rarity-common">Spin for a car!</p>
        <img id="carImage" src="" alt="Car Image" onerror="this.src='https://via.placeholder.com/300x200?text=No+Image';" />
        <div>
          <button class="actionBtn" onclick="spinCar()">üé∞ Spin Car</button>
          <button class="actionBtn" onclick="upgradeLuck()">üîº Upgrade Luck</button>
        </div>
      </div>
      <div class="rarity-legend" style="margin-top:30px;">
        <span class="rarity-common">Common: +1pt</span>
        <span class="rarity-uncommon">Uncommon: +2pt</span>
        <span class="rarity-epic">Epic: +5pt</span>
        <span class="rarity-legendary">Legendary: +10pt</span>
        <span class="rarity-exotic">Exotic: +25pt</span>
        <span class="rarity-mythic">Mythic: +50pt</span>
        <span class="rarity-unknown">???: +100pt</span>
      </div>
    </section>
    <section id="shopSection">
      <h2>üõí Shop</h2>
      <p>Upgrade your stats and increase your chances for rare cars!</p>
      <button class="actionBtn" onclick="buyUpgrade('luck')">Luck Upgrade (+0.1x) - Cost: <span id="costLuck">100</span> pts</button>
      <button class="actionBtn" onclick="buyUpgrade('multiplier')">Multiplier Upgrade (+0.1x) - Cost: <span id="costMultiplier">150</span> pts</button>
      <button class="actionBtn" onclick="buyUpgrade('pointsBoost')">Points Boost (+10%) - Cost: <span id="costPointsBoost">200</span> pts</button>
      <button class="actionBtn" onclick="buyUpgrade('spinSpeed')">Spin Speed Upgrade (-50ms) - Cost: <span id="costSpinSpeed">250</span> pts</button>
      <button class="actionBtn" onclick="buyUpgrade('autoSpin')">Auto Spin Unlock - Cost: <span id="costAutoSpin">500</span> pts</button>
    </section>
    <section id="leaderboardSection">
      <h2>üèÜ Leaderboard</h2>
      <table>
        <thead><tr><th>#</th><th>Name</th><th>Points</th></tr></thead>
        <tbody id="pointsLeaderboard">
          <tr><td>1</td><td>You</td><td id="lbPoints">0</td></tr>
        </tbody>
      </table>
      <table style="margin-top:30px;">
        <thead><tr><th>#</th><th>Name</th><th>Time Played (s)</th></tr></thead>
        <tbody id="timeLeaderboard">
          <tr><td>1</td><td>You</td><td id="lbTime">0</td></tr>
        </tbody>
      </table>
      <table style="margin-top:30px;">
        <thead><tr><th>#</th><th>Name</th><th>Multiplier</th></tr></thead>
        <tbody id="multiplierLeaderboard">
          <tr><td>1</td><td>You</td><td id="lbMultiplier">1.0x</td></tr>
        </tbody>
      </table>
    </section>
  </main>
  <div id="notification"></div>
  <div id="chatBox">
    <div id="chatMessages"></div>
    <input id="chatInput" placeholder="Say something..." onkeydown="sendChat(event)" />
  </div>
  <script>
    // Game variables
    let points = 0;
    let luck = 1.0;
    let multiplier = 1.0;
    let pointsBoost = 1.0;
    let spinSpeed = 100;
    let autoSpin = false;
    let timePlayed = 0;
    let autoSpinInterval;

    // Upgrade costs
    let costs = {
      luck: 100,
      multiplier: 150,
      pointsBoost: 200,
      spinSpeed: 250,
      autoSpin: 500
    };

    // Cars list
    const cars = [
      { name: "Toyota Supra", rarity: "Common", image: "https://upload.wikimedia.org/wikipedia/commons/f/f2/2019_Toyota_Supra_3.0_Front.jpg", points: 1 },
      { name: "Mazda RX-7", rarity: "Legendary", image: "https://upload.wikimedia.org/wikipedia/commons/f/fb/Mazda_RX-7.jpg", points: 10 },
      { name: "Bugatti Chiron", rarity: "Exotic", image: "https://cdn.motor1.com/images/mgl/qWj2E/s3/bugatti-chiron.jpg", points: 25 },
      { name: "Mystery ???", rarity: "???", image: "https://cdn.motor1.com/images/mgl/1xR8g/s1/mystery-car.jpg", points: 100 }
    ];

    // Utility functions
    function showNotification(msg) {
      const notification = document.getElementById("notification");
      notification.innerText = msg;
      notification.style.display = "block";
      setTimeout(() => notification.style.display = "none", 3000);
    }

    function updateStatus() {
      document.getElementById("pointsStatus").innerText = `Points: ${points} | Luck: ${luck.toFixed(1)}x`;
      document.getElementById("costLuck").innerText = costs.luck;
      document.getElementById("costMultiplier").innerText = costs.multiplier;
      document.getElementById("costPointsBoost").innerText = costs.pointsBoost;
      document.getElementById("costSpinSpeed").innerText = costs.spinSpeed;
      document.getElementById("costAutoSpin").innerText = costs.autoSpin;
      updateLeaderboards();
    }

    function updateLeaderboards() {
      document.getElementById("lbPoints").innerText = points;
      document.getElementById("lbTime").innerText = timePlayed;
      document.getElementById("lbMultiplier").innerText = multiplier.toFixed(1) + "x";
    }

    // Section navigation
    function showSection(id) {
      ["mainSection", "shopSection", "leaderboardSection"].forEach(sectionId => {
        document.getElementById(sectionId).style.display = (sectionId === id) ? "block" : "none";
      });
    }
    showSection("mainSection");

    // Spin car logic with animation
    async function spinCar() {
      if (autoSpin) return; // disable manual spin if autospin active
      const carNameElem = document.getElementById("carName");
      const carRarityElem = document.getElementById("carRarity");
      const carImageElem = document.getElementById("carImage");

      carNameElem.innerText = "Spinning...";
      carRarityElem.innerText = "";
      carImageElem.src = "";

      let spins = 20;
      for (let i = 0; i < spins; i++) {
        const car = cars[Math.floor(Math.random() * cars.length)];
        carNameElem.innerText = car.name;
        carRarityElem.innerText = car.rarity;
        carImageElem.src = car.image;
        await new Promise(r => setTimeout(r, spinSpeed - i * 4));
      }

      const finalCar = cars[Math.floor(Math.random() * cars.length * luck) % cars.length];
      carNameElem.innerText = finalCar.name;
      carRarityElem.innerText = finalCar.rarity;
      carImageElem.src = finalCar.image;
      points += Math.floor(finalCar.points * multiplier * pointsBoost);
      updateStatus();

      if (finalCar.rarity === "???") {
        postChat("üî• Someone pulled ??? rarity!");
      }
    }

    // Shop buy
    function buyUpgrade(type) {
      if (points < costs[type]) {
        showNotification("Not enough points!");
        return;
      }
      points -= costs[type];
      costs[type] = Math.floor(costs[type] * 1.5);
      if (type === "luck") luck += 0.1;
      else if (type === "multiplier") multiplier += 0.1;
      else if (type === "pointsBoost") pointsBoost += 0.1;
      else if (type === "spinSpeed") spinSpeed = Math.max(20, spinSpeed - 50);
      else if (type === "autoSpin") {
        autoSpin = true;
        autoSpinInterval = setInterval(spinCar, spinSpeed + 1000);
      }
      updateStatus();
      postChat(`üîº Bought upgrade: ${type}`);
    }

    // Chat
    const badWords = ["fuck", "shit", "bitch", "ass", "hell"];
    function sendChat(e) {
      if (e.key === "Enter") {
        let msg = document.getElementById("chatInput").value.trim();
        if (!msg) return;
        for (const w of badWords) {
          const re = new RegExp(w, "gi");
          msg = msg.replace(re, "****");
        }
        postChat("You: " + msg);
        document.getElementById("chatInput").value = "";
      }
    }
    function postChat(msg) {
      const chatMessages = document.getElementById("chatMessages");
      const div = document.createElement("div");
      div.textContent = msg;
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Online counter (mock)
    function updateOnline() {
      const onlineCount = Math.floor(Math.random() * 10) + 1;
      document.getElementById("onlineStatus").innerText = "Online: " + onlineCount;
    }

    // Timer for time played
    setInterval(() => {
      timePlayed++;
      updateStatus();
      updateOnline();
    }, 1000);

    updateStatus();
  </script>
</body>
</html>

